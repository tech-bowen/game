<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>丰富的贪吃蛇游戏</title>
<style>
    body {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
        background-color: #f0f0f0;
        font-family: Arial, sans-serif;
    }
    #game-board {
        width: 300px;
        height: 300px;
        border: 1px solid #ccc;
        position: relative;
        background-color: #fff;
    }
    .snake {
        width: 10px;
        height: 10px;
        background-color: #333;
        position: absolute;
    }
    .food {
        width: 10px;
        height: 10px;
        background-color: red;
        position: absolute;
    }
    #score-board {
        position: absolute;
        top: 10px;
        left: 10px;
        color: #333;
    }
    #message {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: rgba(0, 0, 0, 0.7);
        color: #fff;
        padding: 20px;
        border-radius: 10px;
        display: none;
    }
    #message.show {
        display: block;
    }
</style>
</head>
<body>
<div id="game-board">
    <div id="score-board">得分: 0</div>
    <div id="message">游戏结束！按 Enter 键重新开始</div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const board = document.getElementById('game-board');
        const scoreBoard = document.getElementById('score-board');
        const message = document.getElementById('message');
        const boardWidth = parseInt(getComputedStyle(board).width);
        const boardHeight = parseInt(getComputedStyle(board).height);
        const snakeSize = 10;
        const initialSnakeLength = 5;
        let snake = [];
        let food = {};
        let score = 0;
        let direction = 'right';
        let gameInterval;
        let isGameRunning = false;

        function initializeGame() {
            snake = [];
            for (let i = 0; i < initialSnakeLength; i++) {
                snake.push({ x: i, y: 0 });
            }
            score = 0;
            direction = 'right';
            renderSnake();
            generateFood();
            updateScore();
        }

        function renderSnake() {
            const snakeElements = document.querySelectorAll('.snake');
            snakeElements.forEach(element => element.remove());
            snake.forEach(segment => {
                const snakeElement = document.createElement('div');
                snakeElement.className = 'snake';
                snakeElement.style.left = segment.x * snakeSize + 'px';
                snakeElement.style.top = segment.y * snakeSize + 'px';
                board.appendChild(snakeElement);
            });
        }

        function generateFood() {
            const foodX = Math.floor(Math.random() * (boardWidth / snakeSize));
            const foodY = Math.floor(Math.random() * (boardHeight / snakeSize));
            food = { x: foodX, y: foodY };
            const foodElement = document.createElement('div');
            foodElement.className = 'food';
            foodElement.style.left = food.x * snakeSize + 'px';
            foodElement.style.top = food.y * snakeSize + 'px';
            board.appendChild(foodElement);
        }

        function moveSnake() {
            const head = { x: snake[0].x, y: snake[0].y };
            switch (direction) {
                case 'up':
                    head.y -= 1;
                    break;
                case 'down':
                    head.y += 1;
                    break;
                case 'left':
                    head.x -= 1;
                    break;
                case 'right':
                    head.x += 1;
                    break;
            }
            snake.unshift(head);

            if (head.x === food.x && head.y === food.y) {
                generateFood();
                score += 10;
                updateScore();
            } else {
                snake.pop();
            }

            if (isCollision(head)) {
                endGame();
                return;
            }

            renderSnake();
        }

        function isCollision(head) {
            // Check wall collision
            if (head.x < 0 || head.x >= boardWidth / snakeSize || head.y < 0 || head.y >= boardHeight / snakeSize) {
                return true;
            }
            // Check self collision
            for (let i = 1; i < snake.length; i++) {
                if (head.x === snake[i].x && head.y === snake[i].y) {
                    return true;
                }
            }
            return false;
        }

        function updateScore() {
            scoreBoard.textContent = '得分: ' + score;
        }

        function endGame() {
            clearInterval(gameInterval);
            isGameRunning = false;
            message.classList.add('show');
        }

        function startGame() {
            if (isGameRunning) return;
            isGameRunning = true;
            message.classList.remove('show');
            initializeGame();
            gameInterval = setInterval(moveSnake, 100); // Adjust the speed here (lower is faster)
        }

        document.addEventListener('keydown', (event) => {
            const key = event.key.toLowerCase();
            if (key === 'arrowup' || key === 'w') {
                direction = 'up';
            } else if (key === 'arrowdown' || key === 's') {
                direction = 'down';
            } else if (key === 'arrowleft' || key === 'a') {
                direction = 'left';
            } else if (key === 'arrowright' || key === 'd') {
                direction = 'right';
            } else if (key === 'enter') {
                startGame();
            }
        });

        startGame();
    });
</script>
</body>
</html>
