<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>贪吃蛇游戏</title>
<style>
    body {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
        background-color: #f0f0f0;
    }
    #game-board {
        width: 300px;
        height: 300px;
        border: 1px solid #ccc;
        position: relative;
    }
    .snake {
        width: 10px;
        height: 10px;
        background-color: #333;
        position: absolute;
    }
    .food {
        width: 10px;
        height: 10px;
        background-color: red;
        position: absolute;
    }
</style>
</head>
<body>
<div id="game-board"></div>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const board = document.getElementById('game-board');
        const boardWidth = parseInt(getComputedStyle(board).width);
        const boardHeight = parseInt(getComputedStyle(board).height);
        const snakeSize = 10;
        const initialSnakeLength = 5;
        let snake = [];
        let food = {};

        function initializeGame() {
            snake = [];
            for (let i = 0; i < initialSnakeLength; i++) {
                snake.push({ x: i, y: 0 });
            }
            renderSnake();
            generateFood();
        }

        function renderSnake() {
            const snakeElements = document.querySelectorAll('.snake');
            snakeElements.forEach(element => element.remove());
            snake.forEach(segment => {
                const snakeElement = document.createElement('div');
                snakeElement.className = 'snake';
                snakeElement.style.left = segment.x * snakeSize + 'px';
                snakeElement.style.top = segment.y * snakeSize + 'px';
                board.appendChild(snakeElement);
            });
        }

        function generateFood() {
            const foodX = Math.floor(Math.random() * (boardWidth / snakeSize)) * snakeSize;
            const foodY = Math.floor(Math.random() * (boardHeight / snakeSize)) * snakeSize;
            food = { x: foodX, y: foodY };
            const foodElement = document.createElement('div');
            foodElement.className = 'food';
            foodElement.style.left = food.x + 'px';
            foodElement.style.top = food.y + 'px';
            board.appendChild(foodElement);
        }

        function moveSnake() {
            const head = { x: snake[0].x, y: snake[0].y };
            switch (direction) {
                case 'up':
                    head.y -= 1;
                    break;
                case 'down':
                    head.y += 1;
                    break;
                case 'left':
                    head.x -= 1;
                    break;
                case 'right':
                    head.x += 1;
                    break;
            }
            snake.unshift(head);
            if (head.x === food.x && head.y === food.y) {
                generateFood();
            } else {
                snake.pop();
            }
            renderSnake();
        }

        let direction = 'right';

        document.addEventListener('keydown', (event) => {
            const key = event.key.toLowerCase();
            if (key === 'arrowup' || key === 'w') {
                direction = 'up';
            } else if (key === 'arrowdown' || key === 's') {
                direction = 'down';
            } else if (key === 'arrowleft' || key === 'a') {
                direction = 'left';
            } else if (key === 'arrowright' || key === 'd') {
                direction = 'right';
            }
        });

        function gameLoop() {
            moveSnake();
            setTimeout(gameLoop, 100); // 调整游戏速度（数值越小越快）
        }

        initializeGame();
        gameLoop();
    });
</script>
</body>
</html>
